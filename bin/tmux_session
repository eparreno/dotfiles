#!/bin/sh

name=`basename $0`
# dir="$HOME/apps/$name"
dir="./"
rc="$dir/.tmuxrc"

if ! test -f $rc; then
  echo "$rc does not exist"
  exit -2
fi

if ! tmux has-session -t $name ; then
  tmux start                           \;\
    new-session -d -s $name exit       \;\
    set default-path       $dir        \;\
    set set-remain-on-exit on          \;\
    setenv -t $name PATH     $PATH     \;\
    source-file $rc                    \;\
    set set-remain-on-exit off
fi

tmux attach -t $name
